{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/xlugx/work/project-crm/client/src/components/leads/Lead.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback, useContext } from 'react';\nimport { useRequest } from '../../hooks/request.hook';\nimport { UserContext } from '../../context/UserContext';\nimport { useHistory, useParams } from 'react-router-dom';\nimport Layout from '../layout/Layout';\nimport Button from '../../ui-components/button/Button';\nimport T from '../../ui-components/text/T';\nimport s from './leads.module.css';\n\nconst Lead = () => {\n  _s();\n\n  const [lead, setLead] = useState([]),\n        {\n    name,\n    phone,\n    status,\n    createdAt,\n    _id\n  } = lead,\n        {\n    request\n  } = useRequest(),\n        {\n    id\n  } = useParams(),\n        history = useHistory(),\n        {\n    userId\n  } = useContext(UserContext);\n  const getLead = useCallback(async () => {\n    const {\n      res\n    } = await request(`/api/leads/${id}`);\n    res && setLead(res);\n  }, [request, lead, setLead]);\n  const handleRemove = useCallback(async () => {\n    const {\n      res\n    } = await request(`/api/leads/${id}`, 'DELETE');\n    res && history.push('/leads/');\n  }, [id]);\n  const handleEdit = useCallback(() => history.push(`/leads/${id}/edit`), [id]);\n  const handleCreateDeal = useCallback(async () => {\n    const payload = {\n      name,\n      phone,\n      lead: _id,\n      author: userId,\n      responsible: userId\n    };\n    const {\n      res\n    } = await request('/api/deals/create', 'POST', payload);\n    res && history.push(`/deals/${res._id}`);\n  });\n  useEffect(() => {\n    getLead();\n    console.log(userId);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u041A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0430 \\u041B\\u0438\\u0434\\u0430\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.lead,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.remove,\n        onClick: handleEdit,\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u0418\\u043C\\u044F: \", name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D: \", phone]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441: \", /*#__PURE__*/_jsxDEV(T, {\n          id: status && `lead.${status}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F: \", createdAt]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.remove,\n        onClick: handleRemove,\n        children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleCreateDeal,\n        children: \"\\u0421\\u043E\\u0437\\u0434\\u0430\\u0442\\u044C \\u0441\\u0434\\u0435\\u043B\\u043A\\u0443\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 12\n  }, this);\n};\n\n_s(Lead, \"2DUb8y4WCPuhWR601oUb6GA9YM0=\", false, function () {\n  return [useRequest, useParams, useHistory];\n});\n\n_c = Lead;\nexport default Lead;\n\nvar _c;\n\n$RefreshReg$(_c, \"Lead\");","map":{"version":3,"sources":["/home/xlugx/work/project-crm/client/src/components/leads/Lead.jsx"],"names":["useEffect","useState","useCallback","useContext","useRequest","UserContext","useHistory","useParams","Layout","Button","T","s","Lead","lead","setLead","name","phone","status","createdAt","_id","request","id","history","userId","getLead","res","handleRemove","push","handleEdit","handleCreateDeal","payload","author","responsible","console","log","remove"],"mappings":";;;;;AAAA,SAASA,SAAT,EAAoBC,QAApB,EAA8BC,WAA9B,EAA2CC,UAA3C,QAA6D,OAA7D;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,SAASC,WAAT,QAA4B,2BAA5B;AACA,SAASC,UAAT,EAAqBC,SAArB,QAAsC,kBAAtC;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,MAAP,MAAmB,mCAAnB;AACA,OAAOC,CAAP,MAAc,4BAAd;AACA,OAAOC,CAAP,MAAc,oBAAd;;AAEA,MAAMC,IAAI,GAAG,MAAM;AAAA;;AACf,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAAC,EAAD,CAAhC;AAAA,QACI;AAAEc,IAAAA,IAAF;AAAQC,IAAAA,KAAR;AAAeC,IAAAA,MAAf;AAAuBC,IAAAA,SAAvB;AAAkCC,IAAAA;AAAlC,MAA0CN,IAD9C;AAAA,QAEI;AAAEO,IAAAA;AAAF,MAAchB,UAAU,EAF5B;AAAA,QAGI;AAAEiB,IAAAA;AAAF,MAASd,SAAS,EAHtB;AAAA,QAIIe,OAAO,GAAGhB,UAAU,EAJxB;AAAA,QAKI;AAAEiB,IAAAA;AAAF,MAAapB,UAAU,CAACE,WAAD,CAL3B;AAOA,QAAMmB,OAAO,GAAGtB,WAAW,CAAC,YAAY;AACpC,UAAM;AAAEuB,MAAAA;AAAF,QAAU,MAAML,OAAO,CAAE,cAAaC,EAAG,EAAlB,CAA7B;AAEAI,IAAAA,GAAG,IAAIX,OAAO,CAACW,GAAD,CAAd;AACH,GAJ0B,EAIxB,CAACL,OAAD,EAAUP,IAAV,EAAgBC,OAAhB,CAJwB,CAA3B;AAMA,QAAMY,YAAY,GAAGxB,WAAW,CAAC,YAAY;AACzC,UAAM;AAAEuB,MAAAA;AAAF,QAAU,MAAML,OAAO,CAAE,cAAaC,EAAG,EAAlB,EAAqB,QAArB,CAA7B;AAEAI,IAAAA,GAAG,IAAIH,OAAO,CAACK,IAAR,CAAa,SAAb,CAAP;AACH,GAJ+B,EAI7B,CAACN,EAAD,CAJ6B,CAAhC;AAMA,QAAMO,UAAU,GAAG1B,WAAW,CAAE,MAAMoB,OAAO,CAACK,IAAR,CAAc,UAASN,EAAG,OAA1B,CAAR,EAA2C,CAACA,EAAD,CAA3C,CAA9B;AAEA,QAAMQ,gBAAgB,GAAG3B,WAAW,CAAC,YAAY;AAC7C,UAAM4B,OAAO,GAAG;AAAEf,MAAAA,IAAF;AAAQC,MAAAA,KAAR;AAAeH,MAAAA,IAAI,EAAEM,GAArB;AAA0BY,MAAAA,MAAM,EAAER,MAAlC;AAA0CS,MAAAA,WAAW,EAAET;AAAvD,KAAhB;AAEA,UAAM;AAAEE,MAAAA;AAAF,QAAU,MAAML,OAAO,CAAC,mBAAD,EAAsB,MAAtB,EAA8BU,OAA9B,CAA7B;AAEAL,IAAAA,GAAG,IAAIH,OAAO,CAACK,IAAR,CAAc,UAASF,GAAG,CAACN,GAAI,EAA/B,CAAP;AACH,GANmC,CAApC;AAQAnB,EAAAA,SAAS,CAAC,MAAM;AACZwB,IAAAA,OAAO;AACPS,IAAAA,OAAO,CAACC,GAAR,CAAYX,MAAZ;AAEH,GAJQ,EAIN,EAJM,CAAT;AAMA,sBAAO,QAAC,MAAD;AAAA,4BACH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADG,eAGH;AAAK,MAAA,SAAS,EAAEZ,CAAC,CAACE,IAAlB;AAAA,8BACI;AAAK,QAAA,SAAS,EAAEF,CAAC,CAACwB,MAAlB;AAA0B,QAAA,OAAO,EAAEP,UAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAA,2CAAWb,IAAX;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ,eAGI;AAAA,mEAAeC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA,cAHJ,eAII;AAAA,0EAAa,QAAC,CAAD;AAAG,UAAA,EAAE,EAAEC,MAAM,IAAK,QAAOA,MAAO;AAAhC;AAAA;AAAA;AAAA;AAAA,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA,cAJJ,eAKI;AAAA,kGAAqBC,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA,cALJ,eAMI;AAAK,QAAA,SAAS,EAAEP,CAAC,CAACwB,MAAlB;AAA0B,QAAA,OAAO,EAAET,YAAnC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANJ,eAQI,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAEG,gBAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cARJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAHG;AAAA;AAAA;AAAA;AAAA;AAAA,UAAP;AAcH,CAlDD;;GAAMjB,I;UAGgBR,U,EACLG,S,EACCD,U;;;KALZM,I;AAoDN,eAAeA,IAAf","sourcesContent":["import { useEffect, useState, useCallback, useContext } from 'react';\nimport { useRequest } from '../../hooks/request.hook';\nimport { UserContext } from '../../context/UserContext';\nimport { useHistory, useParams } from 'react-router-dom';\nimport Layout from '../layout/Layout';\nimport Button from '../../ui-components/button/Button';\nimport T from '../../ui-components/text/T';\nimport s from './leads.module.css';\n\nconst Lead = () => {\n    const [lead, setLead] = useState([]),\n        { name, phone, status, createdAt, _id } = lead,\n        { request } = useRequest(),\n        { id } = useParams(),\n        history = useHistory(),\n        { userId } = useContext(UserContext);\n\n    const getLead = useCallback(async () => {\n        const { res } = await request(`/api/leads/${id}`);\n\n        res && setLead(res);\n    }, [request, lead, setLead]);\n\n    const handleRemove = useCallback(async () => {\n        const { res } = await request(`/api/leads/${id}`, 'DELETE');\n\n        res && history.push('/leads/');\n    }, [id]);\n\n    const handleEdit = useCallback (() => history.push(`/leads/${id}/edit`), [id]);\n\n    const handleCreateDeal = useCallback(async () => {\n        const payload = { name, phone, lead: _id, author: userId, responsible: userId };\n\n        const { res } = await request('/api/deals/create', 'POST', payload);\n\n        res && history.push(`/deals/${res._id}`);\n    })\n\n    useEffect(() => {\n        getLead();\n        console.log(userId);\n\n    }, []);\n\n    return <Layout>\n        <h3>Карточка Лида</h3>\n\n        <div className={s.lead}>\n            <div className={s.remove} onClick={handleEdit}>Изменить</div>\n            <div>Имя: {name}</div>\n            <div>Телефон: {phone}</div>\n            <div>Статус: <T id={status && `lead.${status}`} /></div>\n            <div>Дата создания: {createdAt}</div>\n            <div className={s.remove} onClick={handleRemove}>Удалить</div>\n\n            <Button onClick={handleCreateDeal}>Создать сделку</Button>\n        </div>\n    </Layout>;\n};\n\nexport default Lead;\n"]},"metadata":{},"sourceType":"module"}