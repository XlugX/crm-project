{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/xlugx/work/project-crm/client/src/components/deals/DealEdit.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState, useCallback } from 'react';\nimport { useRequest } from '../../hooks/request.hook';\nimport { useHistory, useParams } from 'react-router-dom';\nimport Input from '../../ui-components/input/Input';\nimport Button from '../../ui-components/button/Button';\nimport Layout from '../layout/Layout';\nimport T from '../../ui-components/text/T';\nimport s from './deals.module.css';\n\nconst DealEdit = () => {\n  _s();\n\n  const {\n    request\n  } = useRequest(),\n        {\n    id\n  } = useParams(),\n        history = useHistory();\n  const [fields, update] = useState({\n    name: null,\n    phone: null,\n    status: null\n  });\n  const handleChange = useCallback(({\n    target: {\n      name,\n      value\n    }\n  }) => {\n    update({ ...fields,\n      [name]: value\n    });\n  }, [fields]);\n  const getLead = useCallback(async () => {\n    const {\n      res\n    } = await request(`/api/deals/${id}`);\n    res && update(res);\n  }, []);\n  const handleRemove = useCallback(async () => {\n    const {\n      res\n    } = await request(`/api/deals/${id}`, 'DELETE');\n    res && history.push('/deals/');\n  }, [id]);\n  const handleSubmit = useCallback(async () => {\n    const {\n      res\n    } = await request(`/api/deals/${id}`, 'PUT', fields);\n    res && history.push(`/deals/${id}`);\n  }, [id, fields]);\n  useEffect(() => {\n    getLead();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0421\\u0434\\u0435\\u043B\\u043A\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: s.lead,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.field,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: s.label,\n          children: \"\\u0418\\u043C\\u044F:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: fields.name,\n          name: \"name\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.field,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: s.label,\n          children: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          value: fields.phone,\n          name: \"phone\",\n          onChange: handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.field,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: s.label,\n          children: \"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"status\",\n            value: \"to_do\",\n            checked: fields.status === 'to_do',\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(T, {\n            id: fields.status && `lead.to_do`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"status\",\n            value: \"in_progress\",\n            checked: fields.status === 'in_progress',\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(T, {\n            id: fields.status && `lead.in_progress`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"radio\",\n            name: \"status\",\n            value: \"done\",\n            checked: fields.status === 'done',\n            onChange: handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(T, {\n            id: fields.status && `lead.done`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.field,\n        children: [\"\\u0414\\u0430\\u0442\\u0430 \\u0441\\u043E\\u0437\\u0434\\u0430\\u043D\\u0438\\u044F: \", fields.createdAt]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: s.field,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          lassName: s.link,\n          onClick: handleRemove,\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleSubmit,\n        children: \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 12\n  }, this);\n};\n\n_s(DealEdit, \"VNMCS333FKIK4C6u6eexJVTQwr4=\", false, function () {\n  return [useRequest, useParams, useHistory];\n});\n\n_c = DealEdit;\nexport default DealEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"DealEdit\");","map":{"version":3,"sources":["/home/xlugx/work/project-crm/client/src/components/deals/DealEdit.jsx"],"names":["useEffect","useState","useCallback","useRequest","useHistory","useParams","Input","Button","Layout","T","s","DealEdit","request","id","history","fields","update","name","phone","status","handleChange","target","value","getLead","res","handleRemove","push","handleSubmit","lead","field","label","createdAt","link"],"mappings":"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","sourcesContent":["import { useEffect, useState, useCallback } from 'react';\nimport { useRequest } from '../../hooks/request.hook';\nimport { useHistory, useParams } from 'react-router-dom';\nimport Input from '../../ui-components/input/Input';\nimport Button from '../../ui-components/button/Button';\nimport Layout from '../layout/Layout';\nimport T from '../../ui-components/text/T';\nimport s from './deals.module.css';\n\nconst DealEdit = () => {\n    const { request } = useRequest(),\n        { id } = useParams(),\n        history = useHistory();\n\n    const [fields, update] = useState({\n        name: null,\n        phone: null,\n        status: null\n    });\n\n    const handleChange = useCallback(({ target: { name, value } }) => {\n        update({ ...fields, [name]: value })\n    }, [fields]);\n\n    const getLead = useCallback(async () => {\n        const { res } = await request(`/api/deals/${id}`);\n\n        res && update(res);\n    }, []);\n\n    const handleRemove = useCallback(async () => {\n        const { res } = await request(`/api/deals/${id}`, 'DELETE');\n\n        res && history.push('/deals/');\n    }, [id]);\n\n    const handleSubmit = useCallback(async () => {\n        const { res } = await request(`/api/deals/${id}`, 'PUT', fields);\n\n        res && history.push(`/deals/${id}`);\n    }, [id, fields]);\n\n    useEffect(() => {\n        getLead();\n    }, []);\n\n    return <Layout>\n        <h3>Редактирование Сделки</h3>\n\n        <div className={s.lead}>\n            <div className={s.field}>\n                <label className={s.label}>Имя:</label>\n                <Input value={fields.name} name='name' onChange={handleChange} />\n            </div>\n            <div className={s.field}>\n                <label className={s.label}>Телефон:</label>\n                <Input value={fields.phone} name='phone' onChange={handleChange} />\n            </div>\n            <div className={s.field}>\n                <label className={s.label}>Статус:</label>\n\n                <div>\n                    <input\n                        type='radio'\n                        name='status'\n                        value='to_do'\n                        checked={fields.status === 'to_do'}\n                        onChange={handleChange}\n                    />\n                    <T id={fields.status && `lead.to_do`} />\n                </div>\n\n                <div>\n                    <input\n                        type='radio'\n                        name='status'\n                        value='in_progress'\n                        checked={fields.status === 'in_progress'}\n                        onChange={handleChange}\n                    />\n                    <T id={fields.status && `lead.in_progress`} />\n                </div>\n\n                <div>\n                    <input\n                        type='radio'\n                        name='status'\n                        value='done'\n                        checked={fields.status === 'done'}\n                        onChange={handleChange}\n                    />\n                    <T id={fields.status && `lead.done`} />\n                </div>\n            </div>\n            <div className={s.field}>Дата создания: {fields.createdAt}</div>\n\n            <div className={s.field}>\n                <div lassName={s.link} onClick={handleRemove}>Удалить</div>\n            </div>\n\n            <Button onClick={handleSubmit}>Сохранить</Button>\n        </div>\n    </Layout>;\n};\n\nexport default DealEdit;\n"]},"metadata":{},"sourceType":"module"}